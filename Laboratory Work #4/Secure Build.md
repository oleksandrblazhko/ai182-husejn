# Огляд практики безпеки

Стратегія Secure Build (SB) приділяє особливу увагу цінності створення програмного забезпечення стандартизованим, повторюваним способом із використанням безпечних компонентів, включаючи залежності від стороннього програмного забезпечення.

Перший потік спрямований на повну автоматизацію, щоб усунути будь-яку суб’єктивність у процесі створення. Додаткові автоматичні перевірки безпеки, такі як SAST і DAST, можна додати до автоматизованого конвеєра збірки, щоб підвищити впевненість і, серед іншого, завчасно позначати регресії безпеки в разі невдачі збірки.

Другий потік визнає, що програмні залежності є звичайними для сучасних програм. Щоб мінімізувати негативний вплив їх незахищеності на захищену програму, вона прагне ідентифікувати їх і контролювати стан їх безпеки. Більш складна версія робить те саме для програмних залежностей, що й для самої програми з точки зору перевірки безпеки.

# Огляд потоків

### Потік A - Процес створення

Збірка це процес створення робочої програми для випуску програмного забезпечення. Це досягається шляхом взяття відповідних файлів вихідного коду та подальшої їх компіляції для створення артефакту збірки

### Потік B – Залежності програмного забезпечення

Програмна залежність — це бібліотека коду або пакет, який повторно використовується в новому програмному забезпеченні. Наприклад, проект машинного навчання може викликати бібліотеку Python для створення моделей.

# Потік A - Процес створення

### Рівень погашення 1

### Вигода

Обмежений ризик людської помилки під час процесу збирання, мінімізуючи проблеми безпеки

### Діяльність

Визначте процес побудови, розділивши його на набір чітких інструкцій, які повинні виконуватися людиною або автоматизованим інструментом. Визначення процесу побудови описує весь процес від кінця до кінця, щоб особа або інструмент могли послідовно виконувати його щоразу та отримувати однаковий результат. Визначення зберігається централізовано та доступне будь-яким інструментам або людям. Уникайте зберігання кількох копій, оскільки вони можуть стати невирівняними та застарілими

Визначення процесу не містить жодних секретів (особливо враховуючи ті, які потрібні під час процесу збирання).

Перегляньте будь-які інструменти для створення, переконавшись, що вони активно підтримуються постачальниками та оновлюються за допомогою виправлень безпеки. Зміцніть конфігурацію кожного інструменту, щоб вона відповідала інструкціям постачальника та найкращим галузевим практикам.

Визначте значення для кожного згенерованого артефакту, яке пізніше можна буде використати для перевірки його цілісності, наприклад підпис або хеш. Захистіть це значення та, якщо артефакт підписано, приватний сертифікат підпису.

Переконайтеся, що будівельні інструменти регулярно виправлені та належним чином загартовані.

### Рівень погашення 2

### Вигода

Ефективний процес створення з інтегрованими інструментами безпеки

### Діяльність

Автоматизуйте процес збірки, щоб збірки можна було виконувати послідовно в будь-який час. Процес створення зазвичай не потребує жодного втручання, що додатково зменшує ймовірність людської помилки.

Використання автоматизованої системи підвищує надійність інструментів для збірки та робить посилення та підтримку набору інструментів ще більш критичним. Зверніть особливу увагу на інтерфейси цих інструментів, як-от веб-портали, і на те, як їх можна заблокувати. Попадання інструменту збирання в мережу може дозволити зловмиснику втрутитися в цілісність процесу. Це може, наприклад, дозволити вбудовувати шкідливий код у програмне забезпечення.

Автоматизований процес може потребувати доступу до облікових даних і секретів, необхідних для створення програмного забезпечення, наприклад сертифіката підпису коду або доступу до сховищ. Поводьтеся з ними обережно. Підпишіть створені артефакти за допомогою сертифіката, який ідентифікує організацію чи бізнес-підрозділ, які його створили, щоб ви могли перевірити його цілісність.

Нарешті, додайте в конвеєр відповідні автоматизовані перевірки безпеки (наприклад, за допомогою інструментів SAST), щоб використовувати автоматизацію для підвищення безпеки.

### Рівень погашення 3

### Вигода

Гарантія того, що ви створюєте програмне забезпечення, яке відповідає базовому рівню безпеки

### Діяльність

Визначте перевірки безпеки, які можна проводити під час процесу збірки, а також мінімальні критерії для проходження збірки – вони можуть відрізнятися залежно від профілів ризику різних програм. Включіть відповідні перевірки безпеки в збірку та примусово порушуйте процес збірки, якщо попередньо визначені критерії не виконуються. Активуйте попередження про проблеми, нижчі за порогове значення, і реєструйте їх у централізованій системі, щоб відстежувати їх і вживати заходів. Якщо це розумно, запровадьте механізм винятків, щоб обійти цю поведінку, якщо ризик певної вразливості прийнято або зменшено. Однак переконайтеся, що ці випадки спершу явно схвалені, і зареєструйте їх виникнення разом із обґрунтуванням.

Якщо технічні обмеження заважають організації автоматично порушувати збірку, забезпечте такий самий ефект за допомогою інших заходів, таких як чітка політика та регулярний аудит.

Керуйте підписом коду на окремому централізованому сервері, який не надає сертифікат системі, що виконує збірку. Якщо можливо, використовуйте детермінований метод, який виводить відтворювані артефакти байт за байтом.

# Потік B – Залежності програмного забезпечення

### Рівень погашення 1

### Вигода

Доступна інформація про відомі проблеми безпеки в залежностях

### Діяльність

Ведіть записи про всі залежності, які використовуються в цільовому робочому середовищі. Це іноді називають специфікацією матеріалів (BOM). Зверніть увагу, що різні компоненти програми можуть використовувати абсолютно різні залежності. Наприклад, якщо пакет програмного забезпечення є веб-програмою, охоплюйте код програми на стороні сервера та сценарії на стороні клієнта. Під час створення цих записів враховуйте різні місця, де можуть бути вказані залежності, наприклад файли конфігурації, каталог проекту на диску, інструмент керування пакетами або фактичний код (наприклад, через IDE, яка підтримує список залежностей).

Зберіть таку інформацію про кожну залежність:

- Де це використовується або містить посилання
- Використана версія
- Ліцензія
- Вихідна інформація (посилання на репозиторій, ім’я автора тощо)
- Статус підтримки та обслуговування залежності

Перевірте записи, щоб виявити будь-які залежності з відомими вразливими місцями, і відповідно оновіть або замініть їх.

### Рівень погашення 2

### Вигода

Повна прозорість відомих проблем безпеки у залежностях

### Діяльність

Оцініть використані залежності та створіть список прийнятних залежностей, схвалених для використання в рамках проекту, команди чи ширшої організації відповідно до визначеного набору критеріїв.

Запровадьте центральне сховище залежностей, з якого можна створити все програмне забезпечення.

Регулярно переглядайте використовувані залежності, щоб переконатися, що:

- вони залишаються правильно ліцензованими
- немає відомих і значних уразливостей, що впливають на ваші програми
- залежність все ще активно підтримується
- ви використовуєте поточну версію
- є вагома причина включити залежність

Вчасно та належним чином реагуйте на невідповідності, розглядаючи їх як дефекти. Скористайтеся автоматизованим інструментом для пошуку вразливих залежностей і передайте виявлені проблеми відповідним командам розробників.

### Рівень погашення 3

### Вигода

Вирішення проблем безпеки у залежностях, порівнянних із тими у вашому власному коді

### Діяльність

Підтримуйте білий список схвалених залежностей і версій і переконайтеся, що процес збірки не вдається за наявності залежності, якої немає в списку. Включіть процес підписання для обробки винятків із цього правила, якщо це розумно.

Виконуйте заходи перевірки безпеки щодо залежностей у білому списку так само, як і самі цільові програми (зокрема, використовуючи SAST та аналізуючи транзитивні залежності). Переконайтеся, що ці перевірки також спрямовані на виявлення можливих бекдорів або пасхалок у залежностях. Встановіть процеси розкриття вразливостей разом із авторами залежностей, включаючи SLA для вирішення проблем. Якщо виконання угод SLA нереалістичне (наприклад, з уразливістю відкритого коду), переконайтеся, що найбільш імовірні випадки очікувані, і ви зможете своєчасно вжити компенсаційні заходи. Запровадити регресійні тести для виправлення виявлених проблем.

Відстежуйте всі виявлені проблеми та їх стан за допомогою вашої системи відстеження дефектів. Інтегруйте свій конвеєр збірки з цією системою, щоб увімкнути помилку збірки, якщо включені залежності містять проблеми вище визначеного рівня критичності.










